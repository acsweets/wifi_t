# 局域网双向通信项目 (WiFi_T)

该项目基于 Flutter 开发，旨在模拟不同设备在局域网的数据交互场景，实现双向实时通信。通过 WebSocket 协议，手机与设备（可用另一台手机模拟）能够互相发送文本和图片数据、消息传递和数据回传功能。

## 功能特性

- ✅ **双向通信**: 支持发送端和接收端角色切换
- ✅ **文本消息**: 实时文本消息传输
- ✅ **图片传输**: 支持图片选择和传输
- ✅ **视频流传输**: 实时摄像头视频流传输
- ✅ **局域网发现**: 自动获取本机IP，手动输入目标IP
- ✅ **mDNS自动发现**: 一键搜索局域网内的WiFi-T设备
- ✅ **实时显示**: 消息实时显示，区分发送/接收方向
- ✅ **简洁UI**: Tab切换界面，操作简单直观

## 技术栈

- **框架**: Flutter 3.6+
- **通信协议**: WebSocket
- **设备发现**: mDNS (multicast_dns)
- **图片处理**: image_picker
- **视频处理**: camera, video_player
- **网络信息**: network_info_plus
- **权限管理**: permission_handler

## 快速开始

### 1. 环境准备
```bash
flutter --version  # 确保 Flutter 3.6+
```

### 2. 安装依赖
```bash
flutter pub get
```

### 3. 运行项目
```bash
flutter run
```

### 4. 使用步骤

#### 手动连接方式：
1. 两台设备连接同一WiFi
2. 设备A: 打开"接收端" → 启动服务器 → 记录IP
3. 设备B: 打开"发送端" → 输入IP → 连接

#### 自动发现方式：
1. 两台设备连接同一WiFi
2. 设备A: 打开"接收端" → 启动服务器
3. 设备B: 打开"发送端" → 点击"搜索设备" → 选择设备连接

4. 开始发送文本、图片和视频流消息

## 项目结构

```
lib/
├── models/
│   └── message.dart          # 消息数据模型
├── services/
│   ├── websocket_service.dart # WebSocket通信服务
│   └── mdns_service.dart     # mDNS设备发现服务
├── screens/
│   ├── home_screen.dart      # 主界面（Tab切换）
│   ├── sender_screen.dart    # 发送端界面
│   └── receiver_screen.dart  # 接收端界面
└── main.dart                 # 应用入口
```
## 使用场景

- 🥽 **VR/AR设备通信**: 模拟智能眼镜与手机的数据交互
- 📱 **设备投屏**: 手机内容投射到其他设备
- 💬 **局域网聊天**: 无需互联网的本地通信
- 🎮 **游戏数据同步**: 多设备游戏数据传输
- 🏠 **智能家居**: 设备间控制指令传输

## 技术特点

### 为什么选择 WebSocket？
- ✅ **实时性**: 全双工通信，延迟低
- ✅ **简单性**: 标准协议，无需自定义格式
- ✅ **跨平台**: Flutter支持良好
- ✅ **调试友好**: 可用浏览器工具调试

### vs TCP 对比
| 特性 | WebSocket | TCP |
|------|-----------|-----|
| 协议复杂度 | 标准协议 | 需自定义 |
| 消息边界 | 自动处理 | 手动处理 |
| 重连机制 | 内置支持 | 需自实现 |
| 调试难度 | 简单 | 复杂 |


